# Chapter1. 도메인 모델 시작하기
### 1.1 도메인이란? (22~24p)
- 소프트웨어로 해결하고자 하는 문제 영역을 의미한다. = 기능
EX) 온라인 쇼핑몰의 상품조회, 구매, 결제, 배송 등
- 도메인은 여러 하위 도메인을 나뉜다.
- 모든 도메인을 직접 구현하지 않으며, 결제나 배송 등은 외부 업체를 사용하기도 한다.

### 1.2 도메인 전문가와 개발자 간 지식 공유 (25~26p)
- 요구사항을 분석하고 설계하는 것이 중요하다.
- 요구사항을 옳바르게 이해해야 한다.

### 1.3 도메인 모델 (27~29p)
- 특정 도메인을 개념적으로 설명한 것을 의미한다.
- 도메인을 이해하려면 제공하는 기능과 데이터 구성을 파악해야 한다.

### 1.4 도메인 모델 패턴 (30~34p)
- 도메인 모델은 도메인 계층을 객체지향 기법으로 구현하는 패턴을 의미한다. <br>
  객체지향 : 상태와 행위를 가진 객체 + 프로그래밍
- 일반적인 아키텍처 구성은 DB - 인프라스트럭처(외부시스템연동) - 도메인(도메인핵심규칙) - 응용(기능실행) - 표현(사용자와 소통) - 사용자 로 되어있다.
- 개념 모델은 순수하게 문제를 분석한 결과물이다. 따라서, 처음에는 전반적인 틀만 잡아놓고 구현과 수정을 거치면서 완벽한 개념모델로 발전시켜야 한다.

### 1.5 도메인 모델 도출 (35~41p)
- 도메인 모델링을 할때 기본은 핵심 구성요소, 규칙, 기능을 찾는 것이다. 기획의 요구사항에서 부터 확인할 수 있다.
- 문서화는 상위 수준에서 정리한 문서로 빠르게 소프트웨어 전반을 이해하기 위해서이며, 깊게 이해하고 싶을 때는 코드레벨로 내려간다.

### 1.6 엔티티와 밸류 (42~56p)
- 모델은 엔티티와 밸류(값)으로 구분할 수 있다.
- 엔티티의 특징은 고유한 식별자를 가지고 있다는 것이다. 각 엔티티는 서로 다른 식별자를 갖는다.<br>
  식별자를 생성하는 방법은 특정규칙, UUID, 자동증가값 등이 있다.<br>
  자동증가값은 DB 에 들어가기전에는 그 값을 알 수 없다. (DB 테이블에 입력되어야 사용이 가능하다)
- 밸류타입은 개념적으로 완전한 하나를 표현할 때 사용한다. EX) Address 밸류타입 -> zipcode, address1, address2 (필드값)<br>
  밸류타입은 클래스형태로 되어있기 때문에 기능을 추가할 수 있다.<br>
  밸류타입을 불변하게 만들면 안전한 코드를 작성할 수 있다.<br>
- 도메인 모델에는 Set 메서드를 넣지 않는다.<br>
  set 메서드는 도메인의 핵심 개념이나 의도를 코드에서 사라지게 한다.<br>
  생성자를 통해 주입시점에 데이터가 올바른지 확인하는 것이 좋다.<br>
  어디에서든 변경이 가능하기 때문에, API 에 관련한 문제를 일으키기도 한다.
  
### 1.7 도메인 용어와 유비쿼터스 언어(57~59p)
- 코드를 작성할 때 도메인 용어를 사용하는 것은 매우 중요하다. 의미를 해석하는 시간을 줄여준다

# Chapter2. 아케텍처 개요
### 2.1 네개의 영역(62~64p)
- 아키텍처를 설계할 때 전형적인 4가지는 표현,응용,도메인,인프라스트럭처 이다.<br>
  표현영역 : 사용자의 요청을 해석해서 응용 서비스에 전달하고 이후 결과를 전달받아 사용자에게 응답한다.<br>
  응용영역 : 사용자에게 제공해야할 기능을 의미한다.<br>
  인프라스트럭처 : 구현기술을 다루는 것을 의미한다. ex) RDBMS 연동, API 호출 등 

### 2.2 계충 구조 아키텍처(65~69p)
- 표현 -> 응용 -> 도메인 -> 인프라스트럭처 구조가 일반적인데, 상위에서 하위로 의존하지만 반대로 의존하지 않는다<br>
- 인프라스트럭처에 의존하면 테스트 구현 및 기능확장이 어려운데, 이러한 점은 DIP 로 보완할 수 있다.

### 2.3 DIP - 추상화한 인터페이스(70~79p)
- 고수준모듈 : 의미 있는 단일 기능을 제공하는 모듈. 여러 저수준모듈로 이루어져 있다.
- 저수준모듈 : 여러 하위기능을 의미
- 고수준 모듈이 저수준 모듈을 사용하게 되면 테스트와 추가 변형이 어렵다는 단점이 있다.<br>
  이러한 점을 해결하기 위해 저수준 모듈이 고수준 모듈을 의존하도록 바꾸는데 추상화한 인터페이스를 사용한다.
  인터페이스에 의존하게 되면, 저수준 객체가 변경되더라도 고수준 모듈은 변경할 필요가 없다.
```
    RuleDiscounter ruleDiscounter = new DroolsRuleDiscounter();
    CalulateDiscountService discountService = new CalulateDiscountService(ruleDiscounter);

    RuleDiscounter ruleDiscounter = new SimpleRuleDiscounter();
    CalulateDiscountService discountService = new CalulateDiscountService(ruleDiscounter);
 ``` 
- 인프라스트럭처는 구현 기술을 다루는 저수준 모듈이고 응용,도메인 영역은 고수준 모듈이다.

### 2.4 도메인 영역의 주요 구성요소(80~89p)
엔티티(Entity) : 고유 식별자를 갖는 객체이며 데이터를 포함한 기능을 제공한다. ex) 주문, 회원, 상품 <br>
밸류(Value) : 하나인 값을 표현할 때 사용한다. ex) Address <br>
애그리거트(Aggregate) : 엔티티와 밸류를 하나로 묶은 것 ex) 주문 애그리거트 <br>
리포지토리(Repository) : 도메인 모델의 영속성 처리 ex) 데이터베이스 <br>
도메인 서비스(Domain Service) : 도메인 로직이 여러 엔티티와 밸류를 필요로 하면 도메인 서비스에서 로직을 실행한다 ex)할인 계산 금액 
- DB 테이블 엔티티와 도메인 테이블 엔티티의 차이점은 도메인 기능을 추가적으로 제공하는 여부에 있다.
- 애그리거트는 도메인 모델에서 전체 구조를 이해하는데 도움을 준다. (군집단위로 파악할 수 있다)
- Repository는 서비스에서 사용한다. 따라서, Repository에서는 서비스에서 사용할 메서드를 제공한다.



